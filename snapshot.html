<!DOCTYPE html><html lang="en"><head>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<meta name="generator" content="ReSpec 34.1.4">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
  
  
  
  
  
  
  
<script>document.title = respecConfig.title</script>
<title>OGC API Features Guideline</title>
  
<title>Default</title>
  
<link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">
  

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline;position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-.7em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style id="respec-nlgov">
img.license{float:left;padding-right:5px}
</style>
<style>
ul.index{columns:30ch;column-gap:1.5em}
ul.index li{list-style:inherit}
ul.index li span{color:inherit;cursor:pointer;white-space:normal}
#index-defined-here ul.index li{font-size:.9rem}
ul.index code{color:inherit}
#index-defined-here .print-only{display:none}
@media print{
#index-defined-here .print-only{display:initial}
}
</style>
<meta name="description" content="This document is a guideline for Dutch data providers who want to use OGC-API-Features for download services in a way that they comply with relevant standards.
The guideline has been written on the bases of the experiences gained from implementations of OGC-API-Features of INSPIRE datasets on test beds.
A second important bases is formed by the results of an open tender, held in the beginning of 2023. This tender aimed at adjusting tools for serving OGC-API-feature services to 3 standards: OGC, Dutch Application Design Rules and INSPIRE. Untill this tender, no tools were known that comply with all these standards. This guideline uses the demoservices from this open tender as an example how one can comply with the standards.
The aim of setting up these test beds and this guideline, has been to stimulate the Dutch data providers and hosting organizations to start publishing data as OGC API Features.
By doing this, a greater goal is reached: A better use of geospatial data.">
<style>

  .sidelabel {
    position: fixed;
    -webkit-transform-origin: top right;
    right: 100%;
    top: 0;
    -webkit-transform: rotate(-90deg);
    padding: 4px 50px 4px 10px;
    color: white;
    white-space: nowrap;
    z-index: 1;
    background-color: #FF0000;
  }
</style>
<script type="text/javascript">
   /* Any custom mermaid.js scripts will go here. */
  </script>
<style>

  /* Any custom mermaid.js scripts will go here. */
  }
</style>
<script id="initialUserConfig" type="application/json">{
  "nl_organisationName": "Geonovum",
  "nl_organisationPublishURL": "https://docs.geostandaarden.nl/",
  "logos": [
    {
      "src": "https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg",
      "alt": "Geonovum",
      "id": "Geonovum",
      "height": 67,
      "width": 132,
      "url": "https://www.geonovum.nl/geo-standaarden"
    }
  ],
  "postProcess": [
    null
  ],
  "latestVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/"
  ],
  "thisVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "specStatus",
    "-",
    "specType",
    "-",
    "shortName",
    "-",
    "publishDate"
  ],
  "prevVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "previousMaturity",
    "-",
    "specType",
    "-",
    "shortName",
    "-",
    "previousPublishDate"
  ],
  "useLogo": true,
  "useLabel": true,
  "license": "cc-by",
  "addSectionLinks": true,
  "localizationStrings": {
    "en": {
      "wv": "Editor's draft",
      "cv": "Candidate recommendation",
      "vv": "Proposed recommendation",
      "def": "Recommendation",
      "basis": "Document",
      "no": "Norm",
      "st": "Standard",
      "im": "Information model",
      "pr": "Practical guideline",
      "hr": "Guide",
      "wa": "Work process agreement",
      "al": "General",
      "bd": "Governance documentation",
      "bp": "Best practice"
    },
    "nl": {
      "wv": "Werkversie",
      "cv": "Consultatieversie",
      "vv": "Versie ter vaststelling",
      "def": "Vastgestelde versie",
      "basis": "Document",
      "no": "Norm",
      "st": "Standaard",
      "im": "Informatiemodel",
      "pr": "Praktijkrichtlijn",
      "hr": "Handreiking",
      "wa": "Werkafspraak",
      "al": "Algemeen",
      "bd": "Beheerdocumentatie",
      "bp": "Best practice"
    }
  },
  "sotdText": {
    "nl": {
      "sotd": "Status van dit document",
      "def": "Dit is de definitieve versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "wv": "Dit is een werkversie die op elk moment kan worden gewijzigd, verwijderd of vervangen door andere documenten. Het is geen stabiel document.",
      "cv": "Dit is een consultatieversie. Commentaar over dit document kan gestuurd worden naar ",
      "vv": "Dit is de definitieve conceptversie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "basis": "Dit is een document zonder officiële status."
    },
    "en": {
      "sotd": "Status of this document",
      "def": "This is the definitive version of this document. Edits resulting from consultations have been applied.",
      "wv": "This is a working draft that can be changed, removed or replaced by other documents at any time. It is not a stable document.",
      "cv": "This is a stable draft, published for public comment. Comments regarding this document may be sent to ",
      "vv": "This is the final draft of this document. Edits resulting from consultations have been applied.",
      "basis": "This document has no official standing."
    }
  },
  "labelColor": {
    "def": "#045D9F",
    "wv": "#FF0000",
    "cv": "#045D9F",
    "vv": "#045D9F",
    "basis": "#80CC28"
  },
  "licenses": {
    "cc0": {
      "name": "Creative Commons 0 Public Domain Dedication",
      "short": "CC0",
      "url": "https://creativecommons.org/publicdomain/zero/1.0/",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/CC-Licentie.svg"
    },
    "cc-by": {
      "name": "Creative Commons Attribution 4.0 International Public License",
      "short": "CC-BY",
      "url": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg"
    },
    "cc-by-nd": {
      "name": "Creative Commons Naamsvermelding-GeenAfgeleideWerken 4.0 Internationaal",
      "short": "CC-BY-ND",
      "url": "https://creativecommons.org/licenses/by-nd/4.0/legalcode.nl",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/cc-by-nd.svg"
    }
  },
  "localBiblio": {
    "PUB-1": {
      "title": "OGC API Features Part1:Core",
      "href": "https://docs.opengeospatial.org/is/17-069r4/17-069r4.html",
      "status": "V1.0",
      "publisher": "OGC",
      "company": "OGC",
      "id": "pub-1"
    },
    "PUB-2": {
      "title": "Setting up an INSPIRE Download service based on the OGC API-Features standard",
      "href": "https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md",
      "status": "V1.0",
      "publisher": "INSPIRE-MIF",
      "company": "Companynaam",
      "id": "pub-2"
    },
    "PUB-3": {
      "title": "Dutch API design rules",
      "href": "https://www.geonovum.nl/over-geonovum/actueel/rest-api-design-rules-op-pas-toe-leg-uit-lijst",
      "status": "19 JULI 2020",
      "publisher": "https://www.geonovum.nl",
      "company": "Geonovum",
      "id": "pub-3"
    },
    "PUB-4": {
      "title": "INSPIRE UML-to-GeoJSON encoding rule",
      "href": "https://github.com/INSPIRE-MIF/2017.2/blob/master/GeoJSON/geojson-encoding-rule.md#inspire-requirements-for-encoding-rules",
      "status": "V0.1",
      "publisher": "Working group on Inspire Action 2017.2",
      "company": "Companynaam",
      "id": "pub-4"
    },
    "PUB-5": {
      "title": "OGC API - Features - Part 2: Coordinate Reference Systems by Reference",
      "href": "http://docs.opengeospatial.org/is/18-058r1/18-058r1.html",
      "status": "V1.0",
      "publisher": "OGC",
      "company": "OGC",
      "id": "pub-5"
    },
    "PUB-6": {
      "title": "OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)",
      "href": "https://docs.ogc.org/DRAFTS/19-079r1.html",
      "status": "V1.0.0, draft",
      "publisher": "OGC",
      "company": "OGC",
      "id": "pub-6"
    }
  },
  "title": "OGC API Features Guideline",
  "specStatus": "wv",
  "specType": "HR",
  "pubDomain": "dk",
  "licence": "cc-by",
  "shortName": "OGC API Features Guideline",
  "editors": [
    {
      "name": "Pieter Bresters",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    }
  ],
  "authors": [
    {
      "name": "Pieter Bresters",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    }
  ],
  "github": "https://github.com/Geonovum/ogc-api-features-guideline",
  "alternateFormats": [
    {
      "label": "pdf",
      "uri": "Guideline.pdf"
    }
  ]
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/base.css"></head>

<body class="h-entry toc-inline"><div class="head">
    <a class="logo" href="https://www.geonovum.nl/geo-standaarden"><img alt="Geonovum" height="67" id="Geonovum" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg" width="132">
  </a> <h1 id="title" class="title">OGC API Features Guideline</h1>
    
    <h2>
      Geonovum Guide<br>
      Editor's draft
      <time class="dt-published" datetime="2023-08-28">August 28, 2023</time>
    </h2>
    <dl>
      
      
      <dt>Latest editor's draft:</dt><dd><a href="https://geonovum.github.io/ogc-api-features-guideline/">https://geonovum.github.io/ogc-api-features-guideline/</a></dd>
      
      
      
      
      
      <dt>Editor:</dt>
      <dd class="editor p-author h-card vcard">
    <span class="p-name fn">Pieter Bresters</span> (<a class="p-org org h-org" href="https://www.geonovum.nl">Geonovum</a>)
  </dd>
      
      <dt>Author:</dt><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Pieter Bresters</span> (<a class="p-org org h-org" href="https://www.geonovum.nl">Geonovum</a>)
  </dd>
      <dt>Participate:</dt><dd>
    <a href="https://github.com/Geonovum/ogc-api-features-guideline/">GitHub Geonovum/ogc-api-features-guideline</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/ogc-api-features-guideline/issues/">File an issue</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/ogc-api-features-guideline/commits/">Commit history</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/ogc-api-features-guideline/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    <p>
          This document is also available in these non-normative format:
          <a rel="alternate" href="Guideline.pdf">pdf</a>
        </p>
    <p class="copyright">
          This document is licensed under 
          <a rel="license" href="https://creativecommons.org/licenses/by/4.0/legalcode" class="subfoot"><img class="license" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Logo Creative Commons Attribution 4.0 International Public License"><br> Creative Commons Attribution 4.0 International Public License</a>
        </p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory"><h2>Abstract</h2>
<p>This document is a guideline for Dutch data providers who want to use OGC-API-Features for download services in a way that they comply with relevant standards.
The guideline has been written on the bases of the experiences gained from implementations of OGC-API-Features of INSPIRE datasets on test beds.
A second important bases is formed by the results of an open tender, held in the beginning of 2023. This tender aimed at adjusting tools for serving OGC-API-feature services to 3 standards: OGC, Dutch Application Design Rules and INSPIRE. Untill this tender, no tools were known that comply with all these standards. This guideline uses the demoservices from this open tender as an example how one can comply with the standards.
The aim of setting up these test beds and this guideline, has been to stimulate the Dutch data providers and hosting organizations to start publishing data as OGC API Features.
By doing this, a greater goal is reached: A better use of geospatial data.</p>
<p>A general recommendation to all parties involved is to adjust as much as possible to the existing requirements as stated in this document.
The most important recommendations for the hosting organizations is to stimulate data providers to start with OGC API features to increase the use of geospatial data according to standards.
Data providers are recommended to first orientate on the possible work of other data providers in this field. A roadmap is described with the steps needed to be taken by data providers.</p>
</section>
  <section id="sotd" class="introductory"><h2>Status of this document</h2><p>This is a working draft that can be changed, removed or replaced by other documents at any time. It is not a stable document.</p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of this document</a></li><li class="tocline"><a class="tocxref" href="#H01"><bdi class="secno">1. </bdi>OGC API Features explained</a></li><li class="tocline"><a class="tocxref" href="#H02"><bdi class="secno">2. </bdi>Roadmap for data providers</a></li><li class="tocline"><a class="tocxref" href="#H03"><bdi class="secno">3. </bdi>Requirements</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ogc-api-features-core"><bdi class="secno">3.1 </bdi>OGC API Features Core</a></li><li class="tocline"><a class="tocxref" href="#inpsire-mif-document-setting-up-an-inspire-download-service-based-on-the-ogc-api-features-standard"><bdi class="secno">3.2 </bdi>INPSIRE-MIF document: Setting up an INSPIRE Download service based on the OGC API-Features standard</a></li><li class="tocline"><a class="tocxref" href="#multilinguality"><bdi class="secno">3.3 </bdi>Multilinguality</a></li><li class="tocline"><a class="tocxref" href="#predefined-download"><bdi class="secno">3.4 </bdi>Predefined download</a></li><li class="tocline"><a class="tocxref" href="#geojson"><bdi class="secno">3.5 </bdi>GeoJSON</a></li><li class="tocline"><a class="tocxref" href="#bulk-download"><bdi class="secno">3.6 </bdi>Bulk download</a></li><li class="tocline"><a class="tocxref" href="#crs-etrs89-and-wgs84"><bdi class="secno">3.7 </bdi>CRS ETRS89 and WGS84</a></li><li class="tocline"><a class="tocxref" href="#gml"><bdi class="secno">3.8 </bdi>GML</a></li><li class="tocline"><a class="tocxref" href="#dutch-api-design-rules"><bdi class="secno">3.9 </bdi>Dutch API design rules</a></li><li class="tocline"><a class="tocxref" href="#describing-encoding"><bdi class="secno">3.10 </bdi>Describing encoding</a></li><li class="tocline"><a class="tocxref" href="#filtering"><bdi class="secno">3.11 </bdi>Filtering</a></li><li class="tocline"><a class="tocxref" href="#metadata-links"><bdi class="secno">3.12 </bdi>Metadata links</a></li><li class="tocline"><a class="tocxref" href="#relevant-documentation"><bdi class="secno">3.13 </bdi>Relevant documentation</a></li></ol></li><li class="tocline"><a class="tocxref" href="#H04"><bdi class="secno">4. </bdi>test hoofdstuk</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">5. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#tof"><bdi class="secno">6. </bdi>List of Figures</a></li><li class="tocline"><a class="tocxref" href="#index"><bdi class="secno">A. </bdi>Index</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#index-defined-here"><bdi class="secno">A.1 </bdi>Terms defined by this specification</a></li><li class="tocline"><a class="tocxref" href="#index-defined-elsewhere"><bdi class="secno">A.2 </bdi>Terms defined by reference</a></li></ol></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1 </bdi>Normative references</a></li></ol></li></ol></nav>

  
  <section id="H01"><div class="header-wrapper"><h2 id="x1-ogc-api-features-explained"><bdi class="secno">1. </bdi>OGC API Features explained</h2><a class="self-link" href="#H01" aria-label="Permalink for Section 1."></a></div>
<p>OGC API Features (OAPIF) is a multi-part standard that offers the capability to create, modify, and query spatial data on the Web and specifies requirements and recommendations for APIs that want to follow a standard way of sharing feature data. 
The specification is a multi-part document. [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>], [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-5" title="OGC API - Features - Part 2: Coordinate Reference Systems by Reference">PUB-5</a></cite>], [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-6" title="OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)">PUB-6</a></cite>].</p>
<p>OAPIF is also the term used for a feature download service by means of an API (Application Program Interface) based on OGC standards. 
OAPIF has been considered as follow up for the OGC WFS standard, but that does not mean it will replace it in the near future, although it might happen in a later future.
They are complementary to each other. Where WFS is mainly known and used in the GIS community, the OAPIF is aiming at the non GIS-community, like web developers. 
OAPIF easier to use and needs less knowledge in the spatial domain.
Note as well that WFS adopts the Geography Markup Language (GML) as a default data format. In contrast, OAPIF includes recommendations to support HTML and GeoJSON as encodings.
Implementations of OAPIF may also optionally support GML.</p>
<p>An OAPIF consist of resources that can be retrieved by typing the corresponding path after the landing page of the OAPIF in a web browser or web application.</p>
<table class="simple">
<thead>
<tr>
<th>Resource</th>
<th>Path</th>
<th>Purpose</th>
</tr>
</thead>
<tbody><tr>
<td>Landing page</td>
<td>/</td>
<td>This is the top-level resource, which serves as an entry point.</td>
</tr>
<tr>
<td>Conformance declaration</td>
<td>/conformance</td>
<td>This resource presents information about the functionality that is implemented by the server.</td>
</tr>
<tr>
<td>API definition</td>
<td>/api</td>
<td>This resource provides metadata about the API itself. Note use of /api on the server is optional and the API definition may be hosted on completely separate server</td>
</tr>
<tr>
<td>Feature collections</td>
<td>/collections</td>
<td>This resource lists the feature collections that are offered through the API.</td>
</tr>
<tr>
<td>Feature collection</td>
<td>/collections/{collectionId}</td>
<td>This resource describes the feature collection identified in the path.</td>
</tr>
<tr>
<td>Features</td>
<td>/collections/{collectionId}/items</td>
<td>This resource presents the features that are contained in the collection.</td>
</tr>
<tr>
<td>Feature</td>
<td>/collections/{collectionId}/items/{featureId}</td>
<td>This resource presents the feature that is identified in the path.</td>
</tr>
</tbody></table>
<p>In the API definition, one can find all the supported encodings (HTML, JSON) and parameters that can be given along with URL like a bounding box or a limit of the amount of features.
By default, an OAPIF service will provide access to a single dataset. Rather than sharing the data as a complete dataset, the OGC API Features standards offer direct, fine-grained access to the data at the feature (object) level.</p>
<p>The best way of understanding the concept is looking at the examples that are discussed in the chapter of <a href="#H03">examples</a>.</p>
<p>Since providing a download service is an INSPIRE requirement when responsible for an INSPIRE dataset, the use of OAPIF can be considered for this purpose.
It is even seen as an endorsed <a href="https://inspire.ec.europa.eu/portfolio/good-practice-library/" target="_blank">Good Practice</a> within the INSPIRE community.</p>
</section>
  <section id="H02"><div class="header-wrapper"><h2 id="x2-roadmap-for-data-providers"><bdi class="secno">2. </bdi>Roadmap for data providers</h2><a class="self-link" href="#H02" aria-label="Permalink for Section 2."></a></div>
<p>The following steps could be considered to follow:</p>
<ol>
<li>Read this document and all the documents in <a href="https://geonovum.github.io/OAPIF-PDOK-INSPIRE/#references">https://geonovum.github.io/OAPIF-PDOK-INSPIRE/#references</a></li>
<li>Make a choice between publishing by yourself or contact a hosting organization that can help you publish the OAPIF services.</li>
<li>Look what other data providers have done in this field for the concerning INSPIRE themes and have a look at these examples: <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/tree/master/deployments">https://github.com/INSPIRE-MIF/gp-ogc-api-features/tree/master/deployments</a>.</li>
<li>If you diced to serve the OAPIF by yourself, make a choice for the best tooling, while regarding the CRS options (see next step).</li>
<li>Figure out the best way of supporting more than one CRS, and at least <a href="https://epsg.io/4326">WGS84</a> and <a href="https://epsg.io/4258">ETRS89</a> since the last is the most common in INSPIRE and mostly mandatory, but also provide the <a href="https://www.opengis.net/def/crs/EPSG/0/28992">Dutch RD</a>. If tooling is chosen that is not able to serve more than one CRS, a second INSPIRE download option should be provided that does give the required CRS.</li>
<li>Decide on the best input encoding for the OAPIF. It depends on the previous steps.</li>
<li>Decide on the best output encoding, which also depends on the previous steps. The tooling used in the examples did a simple 1 to 1 mapping between the input and output encoding. </li>
<li>If a previously published mapping to an encoding other than GML cannot be found for the concerned INSPIRE theme, research the mapping of your harmonized data to this other encodings together with other INSPIRE data providers in Europe and use the principles as stated in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-4" title="INSPIRE UML-to-GeoJSON encoding rule">PUB-4</a></cite>].
Consider leaving out the empty fields to reduce the output size or use an option not to show them.</li>
<li>Execute the transformation into the chosen input encoding. This can be done with software like <a href="https://wetransform.to/halestudio/">HALE studio</a> or <a href="https://www.safe.com/">FME</a></li>
<li>If not described before, describe the mapping from the INSPIRE data model to the output encoding of the OAPIF and publish it in order to be INSPIRE compliant.</li>
<li>Adjust your metadata of the dataset with the addition of extra OAPIF service. As long as there is no official protocol defined in <a href="https://inspire.ec.europa.eu/metadata-codelist/ProtocolValue:1">https://inspire.ec.europa.eu/metadata-codelist/ProtocolValue:1</a>, use the extended code list for the protocol in the Dutch metadata standard 2.1.0 (<a href="https://docs.geostandaarden.nl/md/mdprofiel-iso19119/#codelist-protocol">https://docs.geostandaarden.nl/md/mdprofiel-iso19119/#codelist-protocol</a>) contains: "OGC:API features".</li>
<li>If you host your OAPIF by yourself, research how to make INSPIRE compliant metadata of the OAPIF service. It is probably similar to the metadata of a WFS, except for the protocol element.</li>
<li>Add all the links as mentioned in the chapter on <a href="#H02">requirements</a> (metadata of dataset, INSPIRE feature concept dictionary, Licence, mapping description, bulk download).</li>
<li>The steps for final actual publishing of the OAPIF service, depend on the chosen tool, so there the tooling guidelines need to be followed:</li>
</ol>
<ul>
<li>Geonovum testbed: <a href="https://github.com/Geonovum/ogc-api-testbed/tree/main/docs/docs/howto">https://github.com/Geonovum/ogc-api-testbed/tree/main/docs/docs/howto</a> </li>
<li>GOAF: <a href="https://github.com/PDOK/goaf">https://github.com/PDOK/goaf</a></li>
<li>Pygeoapi: <a href="https://github.com/Geonovum/ogc-api-testbed/blob/main/docs/docs/howto/howto_pygeoapi.md">https://github.com/Geonovum/ogc-api-testbed/blob/main/docs/docs/howto/howto_pygeoapi.md</a> or <a href="https://docs.pygeoapi.io/_/downloads/en/stable/pdf/">https://docs.pygeoapi.io/_/downloads/en/stable/pdf/</a></li>
<li>Geoserver: <a href="https://github.com/Geonovum/ogc-api-testbed/blob/main/docs/docs/howto/howto_geoserver.md">https://github.com/Geonovum/ogc-api-testbed/blob/main/docs/docs/howto/howto_geoserver.md</a> or <a href="https://docs.geoserver.org/latest/en/user/">https://docs.geoserver.org/latest/en/user/</a></li>
</ul>
<ol start="15">
<li>Validate the OAPIF service with the <a href="https://inspire.ec.europa.eu/validator/home/index.html">INSPIRE validation tool</a> and adjust where possible to be compliant.</li>
<li>When a working INSPIRE OAPIF is published with a well described mapping to the output encoding, it could be shared at <a href="https://github.com/INSPIRE-MIF/2017.2/issues">https://github.com/INSPIRE-MIF/2017.2/issues</a> or <a href="https://github.com/Geonovum/OAPIF-PDOK-INSPIRE/issues">https://github.com/Geonovum/OAPIF-PDOK-INSPIRE/issues</a>.</li>
</ol>
</section>
  <section id="H03"><div class="header-wrapper"><h2 id="x3-requirements"><bdi class="secno">3. </bdi>Requirements</h2><a class="self-link" href="#H03" aria-label="Permalink for Section 3."></a></div>
<p>Below the most relevant requirements (or requirement classes) for setting up an INSPIRE OAPIF are listed:</p>
<table class="simple">
<thead>
<tr>
<th>nr</th>
<th>requirement</th>
<th>priority</th>
<th>reference</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html">OGC API Features Core</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>]</td>
</tr>
<tr>
<td>2</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md">INPSIRE-MIF document: Setting up an INSPIRE Download service based on the OGC API-Features standard</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>]</td>
</tr>
<tr>
<td>3</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#82-requirements-class-inspire-multilinguality-">multilinguality</a></td>
<td>3</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] #82-requirements-class-inspire-multilinguality-</td>
</tr>
<tr>
<td>4</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-pre-defined">predefined download</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] #req-pre-defined</td>
</tr>
<tr>
<td>5</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-oapif-json">GeoJSON</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] #req-oapif-json</td>
</tr>
<tr>
<td>6</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-bulk-download">bulk download</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] #req-bulk-download</td>
</tr>
<tr>
<td>7</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-crs">CRS ETRS89 and WGS84</a></td>
<td>2</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-5" title="OGC API - Features - Part 2: Coordinate Reference Systems by Reference">PUB-5</a></cite>] and [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] #req-crs</td>
</tr>
<tr>
<td>8</td>
<td>INSPIRE validated GML as <a href="https://inspire.ec.europa.eu/validator/about/">input</a> and <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_requirements_class_geography_markup_language_gml_simple_features_profile_level_2">output</a></td>
<td>3</td>
<td><a href="https://inspire.ec.europa.eu/validator/about/">https://inspire.ec.europa.eu/validator/about/</a> and [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>] #_requirements_classes_for_encodings</td>
</tr>
<tr>
<td>9</td>
<td><a href="https://www.geonovum.nl/over-geonovum/actueel/rest-api-design-rules-op-pas-toe-leg-uit-lijst">Dutch API design rules</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-3" title="Dutch API design rules">PUB-3</a></cite>]</td>
</tr>
<tr>
<td>10</td>
<td><a href="https://github.com/INSPIRE-MIF/2017.2/blob/master/GeoJSON/geojson-encoding-rule.md#inspire-requirements-for-encoding-rules">describing encoding</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-4" title="INSPIRE UML-to-GeoJSON encoding rule">PUB-4</a></cite>]</td>
</tr>
<tr>
<td>11</td>
<td><a href="https://docs.ogc.org/DRAFTS/19-079r1.html">filtering</a></td>
<td>2</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-6" title="OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)">PUB-6</a></cite>]</td>
</tr>
<tr>
<td>12</td>
<td><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#metadata-elements-of-the-data-set">metadata links</a></td>
<td>1</td>
<td>[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>] #rec_core_fc-md-descriptions  and  [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] #metadata-elements-of-the-data-set</td>
</tr>
</tbody></table>
<section id="ogc-api-features-core"><div class="header-wrapper"><h3 id="x3-1-ogc-api-features-core"><bdi class="secno">3.1 </bdi>OGC API Features Core</h3><a class="self-link" href="#ogc-api-features-core" aria-label="Permalink for Section 3.1"></a></div>
<p><a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html">OGC API Features Core</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>] describes the basic requirements (50) and recommendations (17) according to OGC that one needs to follow, independent of INSPIRE. 
It describes which paths can be used and what responses one should receive. 
It does not make the use of <a href="https://oai.github.io/Documentation/specification.html">OpenAPI Specification 3.0</a> mandatory, but if it is used, it gives an extra <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#rc_oas30">requirement class</a>.</p>
<p>There is a INSPIRE validation on the OGC standards for OAPIF available. It test on OGC requirements, but it does not test the requirements as stated in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>].</p>
<p>&nbsp;&nbsp;&nbsp;
      </p><figure id="fig-validation-on-the-ogc-standards-for-oapif">
        <img src="media/INSPIRE_validator_OAPIF.png" alt="INSPIRE Validator">
        <figcaption><a class="self-link" href="#fig-validation-on-the-ogc-standards-for-oapif">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">Validation on the OGC standards for OAPIF</span></figcaption>
      </figure>
    <p></p>
</section><section id="inpsire-mif-document-setting-up-an-inspire-download-service-based-on-the-ogc-api-features-standard"><div class="header-wrapper"><h3 id="x3-2-inpsire-mif-document-setting-up-an-inspire-download-service-based-on-the-ogc-api-features-standard"><bdi class="secno">3.2 </bdi>INPSIRE-MIF document: Setting up an INSPIRE Download service based on the OGC API-Features standard</h3><a class="self-link" href="#inpsire-mif-document-setting-up-an-inspire-download-service-based-on-the-ogc-api-features-standard" aria-label="Permalink for Section 3.2"></a></div>
<p><a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md">INPSIRE-MIF document: Setting up an INSPIRE Download service based on the OGC API-Features standard</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] describes the specific INSPIRE requirements.
Most of them are explained in the next chapters.
This document does propose in <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#81-requirements-class-inspire-pre-defined-data-set-download-oapif--">Note 2</a> to make it a mandatory requirement for INSPIRE to comply with <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#rc_oas30">OAPIF requirements class OpenAPI 3.0.</a></p>
</section><section id="multilinguality"><div class="header-wrapper"><h3 id="x3-3-multilinguality"><bdi class="secno">3.3 </bdi>Multilinguality</h3><a class="self-link" href="#multilinguality" aria-label="Permalink for Section 3.3"></a></div>
<p>The <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#82-requirements-class-inspire-multilinguality-">multilinguality requirement class</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] is mandatory for all data sets that contain information in more than one natural language.
This is mostly not the case in the Netherlands, so it is of less importance.</p>
</section><section id="predefined-download"><div class="header-wrapper"><h3 id="x3-4-predefined-download"><bdi class="secno">3.4 </bdi>Predefined download</h3><a class="self-link" href="#predefined-download" aria-label="Permalink for Section 3.4"></a></div>
<p>The <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-pre-defined">predefined download requirement class</a>,[<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] consists of 3 requirements for each collection to link to:</p>
<ol>
<li>the metadata of the corresponding dataset</li>
<li>the corresponding entry in the <a href="https://inspire.ec.europa.eu/featureconcept">INSPIRE feature concept dictionary</a></li>
<li>the license</li>
</ol>
</section><section id="geojson"><div class="header-wrapper"><h3 id="x3-5-geojson"><bdi class="secno">3.5 </bdi>GeoJSON</h3><a class="self-link" href="#geojson" aria-label="Permalink for Section 3.5"></a></div>
<p>The <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_requirements_class_geojson">GeoJSON requirement class</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>] recommends to support GeoJSON for features with geometry, but as stated in <a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_encodings">https://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_encodings</a>, no encoding is mandatory. 
The <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-oapif-json">GeoJSON requirement class</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] also recommends to document how the GeoJSON encoding is retrieved from the INSPIRE data models.</p>
</section><section id="bulk-download"><div class="header-wrapper"><h3 id="x3-6-bulk-download"><bdi class="secno">3.6 </bdi>Bulk download</h3><a class="self-link" href="#bulk-download" aria-label="Permalink for Section 3.6"></a></div>
<p>The <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-bulk-download">bulk download requirement class</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] requires links for enclosure of the total data set and/or of each seperate collection.</p>
</section><section id="crs-etrs89-and-wgs84"><div class="header-wrapper"><h3 id="x3-7-crs-etrs89-and-wgs84"><bdi class="secno">3.7 </bdi>CRS ETRS89 and WGS84</h3><a class="self-link" href="#crs-etrs89-and-wgs84" aria-label="Permalink for Section 3.7"></a></div>
<p>The <a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_coordinate_reference_systems">CRS requirement</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>] requires <a href="http://www.opengis.net/def/crs/OGC/1.3/CRS84">WGS84</a> for 2D-data and <a href="http://www.opengis.net/def/crs/OGC/0/CRS84h">WGS84h</a> for 3D-data as default.
The <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#req-crs">INSPIRE-CRS requirement class</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] requires also one of the INSPIRE CRS's based on ETRS89 to be supported
The <a href="http://docs.opengeospatial.org/is/18-058r1/18-058r1.html">OGC API - Features - Part 2 standard</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-5" title="OGC API - Features - Part 2: Coordinate Reference Systems by Reference">PUB-5</a></cite>] prescribes how to support different coordinate systems with OAPIF.</p>
<p>For the Dutch data providers, it is recommended to also support <a href="https://www.opengis.net/def/crs/EPSG/0/28992">RD</a> for 2D data or <a href="https://www.opengis.net/def/crs/EPSG/0/7415">RD +NAP</a> for 3D data. See also: <a href="https://docs.geostandaarden.nl/crs/crs">https://docs.geostandaarden.nl/crs/crs</a>. </p>
</section><section id="gml"><div class="header-wrapper"><h3 id="x3-8-gml"><bdi class="secno">3.8 </bdi>GML</h3><a class="self-link" href="#gml" aria-label="Permalink for Section 3.8"></a></div>
<p>The use of GML as encoding for INSPIRE data can be considered in two ways. As input and as output.</p>
<p>When we consider the input, one would like to be able to use a source dataset of harmonized data. In most cases, this will be a GML encoded dataset. 
The GML encoding is at least needed to validate the data set with the <a href="https://inspire.ec.europa.eu/validator/about/">EU INSPIRE  validator</a>
Unfortunately, not many tooling for creating a OAPIF service is able to use GML as input. Especially when it concerns a complex GML dataset. So, a transformation to another encoding like GeoJSON is needed.</p>
<p>Output of GML from the OAPIF service can only be in simple features <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_requirements_class_geography_markup_language_gml_simple_features_profile_level_0">level 0</a> and <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_requirements_class_geography_markup_language_gml_simple_features_profile_level_2">level 2</a>.
So no complex features will be supported.</p>
</section><section id="dutch-api-design-rules"><div class="header-wrapper"><h3 id="x3-9-dutch-api-design-rules"><bdi class="secno">3.9 </bdi>Dutch API design rules</h3><a class="self-link" href="#dutch-api-design-rules" aria-label="Permalink for Section 3.9"></a></div>
<p>Dutch data providers are recommended to follow the <a href="https://www.geonovum.nl/over-geonovum/actueel/rest-api-design-rules-op-pas-toe-leg-uit-lijst">Dutch API design rules</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-3" title="Dutch API design rules">PUB-3</a></cite>]. This is not an INSPIRE requirement.</p>
</section><section id="describing-encoding"><div class="header-wrapper"><h3 id="x3-10-describing-encoding"><bdi class="secno">3.10 </bdi>Describing encoding</h3><a class="self-link" href="#describing-encoding" aria-label="Permalink for Section 3.10"></a></div>
<p>The standards considered in this guideline do not set a specific encoding as mandatory. <a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_encodings">https://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_encodings</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>]
Once another encoding than GML is used, data providers need to document how the encoding relates to the concerned INSPIRE data model.
The good practice on the use of <a href="https://inspire.ec.europa.eu/good-practice/geopackage-encoding-inspire-datasets">geopackages</a> as encoding, describes how this describing could be done.</p>
</section><section id="filtering"><div class="header-wrapper"><h3 id="x3-11-filtering"><bdi class="secno">3.11 </bdi>Filtering</h3><a class="self-link" href="#filtering" aria-label="Permalink for Section 3.11"></a></div>
<p>The specification for <a href="https://docs.ogc.org/DRAFTS/19-079r1.html">filtering</a>, [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-6" title="OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)">PUB-6</a></cite>] is still a draft version and has therefore not yet been taken into account.
Some basic filtering requirements are described in <a href="http://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_items_">OGC API - Features - Part 1: Core</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>].
This only concerns filtering on a bounding box and on properties.</p>
</section><section id="metadata-links"><div class="header-wrapper"><h3 id="x3-12-metadata-links"><bdi class="secno">3.12 </bdi>Metadata links</h3><a class="self-link" href="#metadata-links" aria-label="Permalink for Section 3.12"></a></div>
<p>The <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md#metadata-elements-of-the-data-set">requirement for metadata links to the data</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-2" title="Setting up an INSPIRE Download service based on the OGC API-Features standard">PUB-2</a></cite>] have also been described in predefined download requirement class.
The <a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html#_api_definition_2">requirement for metadata of the API</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-pub-1" title="OGC API Features Part1:Core">PUB-1</a></cite>] describes the metadata of the API via the API definition.</p>
</section><section id="relevant-documentation"><div class="header-wrapper"><h3 id="x3-13-relevant-documentation"><bdi class="secno">3.13 </bdi>Relevant documentation</h3><a class="self-link" href="#relevant-documentation" aria-label="Permalink for Section 3.13"></a></div>
<p>Relevant documentation is shown in <a href="#references">appendix A</a>.</p>
</section></section>
  <section id="H04"><div class="header-wrapper"><h2 id="x4-test-hoofdstuk"><bdi class="secno">4. </bdi>test hoofdstuk</h2><a class="self-link" href="#H04" aria-label="Permalink for Section 4."></a></div>
<p>test
test</p>
</section>
  
  <section id="conformance"><div class="header-wrapper"><h2 id="x5-conformance"><bdi class="secno">5. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 5."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p></section>
  <section id="tof"><div class="header-wrapper"><h2 id="x6-list-of-figures"><bdi class="secno">6. </bdi>List of Figures</h2><a class="self-link" href="#tof" aria-label="Permalink for Section 6."></a></div><ul class="tof">
        <li class="tofline">
    <a class="tocxref" href="#fig-validation-on-the-ogc-standards-for-oapif"><span class="self-link">Figure <bdi class="figno">1</bdi></span> <span class="fig-title">Validation on the OGC standards for OAPIF</span></a>
  </li>
      </ul></section>
  <section id="index" class="appendix"><div class="header-wrapper"><h2 id="a-index"><bdi class="secno">A. </bdi>Index</h2><a class="self-link" href="#index" aria-label="Permalink for Appendix A."></a></div><section id="index-defined-here">
    <div class="header-wrapper"><h3 id="a-1-terms-defined-by-this-specification"><bdi class="secno">A.1 </bdi>Terms defined by this specification</h3><a class="self-link" href="#index-defined-here" aria-label="Permalink for Appendix A.1"></a></div>
    <ul class="index">
    
  </ul>
  </section><section id="index-defined-elsewhere">
    <div class="header-wrapper"><h3 id="a-2-terms-defined-by-reference"><bdi class="secno">A.2 </bdi>Terms defined by reference</h3><a class="self-link" href="#index-defined-elsewhere" aria-label="Permalink for Appendix A.2"></a></div>
    <ul class="index">
    
  </ul>
  </section></section>



<section id="references" class="appendix"><div class="header-wrapper"><h2 id="b-references"><bdi class="secno">B. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix B."></a></div><section id="normative-references">
    <div class="header-wrapper"><h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a></div>
    <dl class="bibliography"><dt id="bib-pub-1">[PUB-1]</dt><dd>
      <a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html"><cite>OGC API Features Part1:Core</cite></a>.  OGC. V1.0. URL: <a href="https://docs.opengeospatial.org/is/17-069r4/17-069r4.html">https://docs.opengeospatial.org/is/17-069r4/17-069r4.html</a>
    </dd><dt id="bib-pub-2">[PUB-2]</dt><dd>
      <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md"><cite>Setting up an INSPIRE Download service based on the OGC API-Features standard</cite></a>.  INSPIRE-MIF. V1.0. URL: <a href="https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md">https://github.com/INSPIRE-MIF/gp-ogc-api-features/blob/master/spec/oapif-inspire-download.md</a>
    </dd><dt id="bib-pub-3">[PUB-3]</dt><dd>
      <a href="https://www.geonovum.nl/over-geonovum/actueel/rest-api-design-rules-op-pas-toe-leg-uit-lijst"><cite>Dutch API design rules</cite></a>.  https://www.geonovum.nl. 19 JULI 2020. URL: <a href="https://www.geonovum.nl/over-geonovum/actueel/rest-api-design-rules-op-pas-toe-leg-uit-lijst">https://www.geonovum.nl/over-geonovum/actueel/rest-api-design-rules-op-pas-toe-leg-uit-lijst</a>
    </dd><dt id="bib-pub-4">[PUB-4]</dt><dd>
      <a href="https://github.com/INSPIRE-MIF/2017.2/blob/master/GeoJSON/geojson-encoding-rule.md#inspire-requirements-for-encoding-rules"><cite>INSPIRE UML-to-GeoJSON encoding rule</cite></a>.  Working group on Inspire Action 2017.2. V0.1. URL: <a href="https://github.com/INSPIRE-MIF/2017.2/blob/master/GeoJSON/geojson-encoding-rule.md#inspire-requirements-for-encoding-rules">https://github.com/INSPIRE-MIF/2017.2/blob/master/GeoJSON/geojson-encoding-rule.md#inspire-requirements-for-encoding-rules</a>
    </dd><dt id="bib-pub-5">[PUB-5]</dt><dd>
      <a href="http://docs.opengeospatial.org/is/18-058r1/18-058r1.html"><cite>OGC API - Features - Part 2: Coordinate Reference Systems by Reference</cite></a>.  OGC. V1.0. URL: <a href="http://docs.opengeospatial.org/is/18-058r1/18-058r1.html">http://docs.opengeospatial.org/is/18-058r1/18-058r1.html</a>
    </dd><dt id="bib-pub-6">[PUB-6]</dt><dd>
      <a href="https://docs.ogc.org/DRAFTS/19-079r1.html"><cite>OGC API - Features - Part 3: Filtering and the Common Query Language (CQL)</cite></a>.  OGC. V1.0.0, draft. URL: <a href="https://docs.ogc.org/DRAFTS/19-079r1.html">https://docs.ogc.org/DRAFTS/19-079r1.html</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><div class="sidelabel">Geonovum Guide - Editor's draft</div><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>